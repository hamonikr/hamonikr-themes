#!/bin/bash

case "$1" in
    remove|upgrade)

      if [ -f /usr/share/cinnamon/applets/grouped-window-list@cinnamon.org/settings-override.json.bak ] ; then
        mv -f /usr/share/cinnamon/applets/grouped-window-list@cinnamon.org/settings-override.json.bak \
        /usr/share/cinnamon/applets/grouped-window-list@cinnamon.org/settings-override.json
      fi

      if [ -f /usr/share/cinnamon/applets/menu@cinnamon.org/settings-override.json.bak ] ; then
        mv -f /usr/share/cinnamon/applets/menu@cinnamon.org/settings-override.json.bak \
        /usr/share/cinnamon/applets/menu@cinnamon.org/settings-override.json
      fi
      
      /usr/local/bin/hamonikr-theme-start remove || true
      
      gtk-update-icon-cache || true

      if [ -f "/etc/hamonikr/info" ] ; then
          if which glib-compile-schemas >/dev/null 2>&1 ; then
              glib-compile-schemas /usr/share/glib-2.0/schemas
          fi    
      fi      
    ;;

    deconfigure|failed-upgrade)
      gtk-update-icon-cache || true
      # fc-cache -v -f
    ;;

    *)
        echo "prerm called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac
